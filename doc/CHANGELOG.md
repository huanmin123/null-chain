# 版本更新记录

本文档记录了 Null-Chain 框架的版本更新历史，按时间倒序排列（最新版本在前）。

---

## 1.1.3-RELEASE (2025-12~xxxx)

### 新增功能

1. **新增很多实用的方法**：扩展了框架的功能，提供更多便捷的操作方法
2. **新增 SSE 流式请求**：支持 Server-Sent Events (SSE) 流式响应处理
3. **新增时间间隔计算的方法**：提供 `dateBetween()` 方法，支持计算两个日期之间的间隔
4. **新增部分流式 API**：扩展了流式操作的功能

### 功能优化

1. **去除一些多余的方法**：清理了不必要的方法，保持 API 简洁
2. **优化了性能**：提升了框架的整体性能
3. **请求的时候支持异步了**：之前异步请求有些蹩脚不能和配置一起使用，现在已优化
4. **优化了部分报错场景的堆栈混乱问题**：改进了异常堆栈信息，便于问题定位
5. **优化了计算场景出现多余 0 问题**：修复了数值计算中多余零的问题

### 兼容性

1. **JDK 8~JDK 25 做了全版本兼容**：全面测试并兼容 JDK 8 到 JDK 25 的所有版本

---

## 1.1.1-RELEASE (2025-3~xxxx)

### 新增功能

1. **新增 orElseNull**：提供 `orElseNull()` 方法，允许返回 `null` 值

### 线程池优化

1. **新增线程池的保留策略**：避免不用的线程池工厂持续存在内存中，优化内存使用
2. **优化线程池创建策略**：
   - 取消 CPU 和 IO 区别
   - 默认 CPU 核数/2 增加任务数量
   - 提供自定义覆盖各种方法

### 代码重构

1. **重构空链底层代码采用功能模块划分**：
   - 不再一味地追求无限续航（链路过长）
   - 代码提示膨胀问题得到解决
   - 根据长时间使用发现不同功能之间联动的可能非常低
   - 使用 A 功能的时候无需 B 功能的提示

2. **重构空链执行规则采用延迟最终执行策略**：优化了执行机制，提升性能

### 功能优化

1. **优化 eq 比较策略**：改进了相等性比较的实现
2. **降低 bytebuddy 版本**：降低依赖版本，提升兼容性
3. **去掉了一些蹩脚方法**：保证空链的干净，移除不合适的方法
4. **支持续接空链**：
   - 之前一旦遇到终结方法后，再次调用上次引用了空链就会拿到最开始的终结方法值
   - 现在可以续接了，使用更加灵活

---

## 1.10-RELEASE (2024-9~2025-3)

### 重大变更

1. **取消自定义转换器改变为自定义 tool**：架构调整，使用 tool 替代转换器
2. **修改 NULL 为 Null**：
   - 根据日常编写代码的习惯，`NULL` 总是感觉到别扭
   - 在编译器中看起来和别的代码格格不入，总是习惯敲 `Null`
   - 改完后，发现代码看起来舒服多了

### 新增功能

1. **新增 tools 节点**：支持自定义工具类
2. **新增了收集器的功能**：提供 `collect()` 方法，用于收集链中不同类型的值
3. **新增 Stream 部分中间态处理功能**：支持 `map`、`filter`、`collect` 等流式操作
4. **新增 of 兼容 Optional 和 Stream**：支持从 `Optional` 和 `Stream` 创建空链，以及一些集合转流的操作

### 任务和工具优化

1. **任务模式调整**：优化了任务执行模式
2. **重构任务设计模式和转换器设计模式**：
   - 新增参数校验
   - 解决任务或者转换器异常导致打印日志有点问题

### 集合处理优化

1. **不在做兼容 ListSet 等这些集合的入参**：
   - 统一都是泛型入参
   - 因为 List、Set 等都是内置 `toArray`
   - 虽然在性能上不是最好的，但是在兼容性上是最佳的方式

### 其他优化

1. **改变了部分方法的名称**：优化了方法命名
2. **优化了内部各种校验逻辑**：修复了部分 bug
3. **优化了 http 请求**：改进了 HTTP 请求的实现

---

## 1.0.9-RELEASE (2024-4~2024-9)

### 异常处理升级

1. **异常升级**：
   - 把所有节点和方法内部异常都进行一个拦截和加强
   - 保证异常出现的时候，链路日志能追加上去
   - 便于问题定位和调试

### 架构调整

1. **去掉一些不合适的方法**：
   - 比如转流和一些操作集合的方法
   - 对空链的定义进行了重新思考
   - 发现很多东西需要从源头开始下手，源头是对象
   - 应该专注于对象方面而不是集合的操作
   - 集合的本质是容器，可以实现自己的空链集合来完成兼容
   - 而不是让空链去兼容集合
   - 删除了大量的集合兼容的方法，让空链更加纯粹

### 新增功能

1. **新增 json 互相转化的方法**：提供 `json()` 和 `fromJson()` 方法
2. **优化了转 json 内部的常见 bug**：修复了 JSON 转换中的问题
3. **新增空链的 OkHttp**：内置 HTTP 请求支持
4. **兼容集合和流的工具操作 NullCollectors**：提供集合和流的工具操作

### Bug 修复

1. **转换器和任务 bug 修复**：修复了转换器和任务相关的问题
2. **修复了一些漏洞扫描出的问题**：提升了安全性
3. **统一了任务的入参**：之前的有点乱，现在统一了
4. **解决了在转异步之前有空的时候导致异步报错了**：修复了异步处理中的空值问题

### 性能优化

1. **优化性能**：提升了框架性能
2. **新增类似 js 的 then 和 catch 异步功能**：提供了更灵活的异步处理方式

---

## 1.0.8-RELEASE (2023-12~2024-4)

### 里程碑版本

**1.0.8-RELEASE 是空链真正完成的一个版本，理想的功能基本都实现了，从现在开始才是真正的空链。**

### 主要功能

1. **添加了各种自定义功能**：
   - 转换器（Converter）
   - 任务（Task）
   - 脚本（Script）
   - HTTP 请求（OkHttp）

2. **新增时间比较方法**：提供日期比较功能

3. **修复了各种隐性和难以发现的 bug**：提升了框架的稳定性

4. **去掉了一些不合适的方法**：保持 API 的简洁和一致性

---

## 版本说明

- **RELEASE**：正式发布版本，可用于生产环境
- **时间范围**：表示该版本的维护时间范围
- **版本号规则**：主版本号.次版本号.修订版本号-RELEASE

## 升级建议

- **从 1.0.x 升级到 1.1.x**：注意 API 变更，特别是 `NULL` 改为 `Null`，以及转换器改为 tool
- **从 1.1.1 升级到 1.1.3**：主要是功能增强和性能优化，API 兼容性良好
- **建议查看**：[迁移指南](./迁移指南.md)（如有）了解详细的迁移步骤

## 反馈

如有问题或建议，请提交 Issue：https://gitee.com/huanminabc/null-chain/issues

